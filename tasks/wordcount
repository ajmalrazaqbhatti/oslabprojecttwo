#!/usr/bin/env bash

# ----------------
# SCRIPT OVERVIEW:
# ----------------
# NexOS Task: wordcount
# Simple word counter that counts words in user input
# ----------------

# ##########################################
# DISPLAY CONFIGURATION
# ##########################################
echo '=== NexOS Word Counter ==='
echo 'Enter text to count words (or "q" to quit)'
echo '----------------------------------------'

# ##########################################
# MAIN PROGRAM LOOP
# ##########################################
while true; do
  echo "Enter text (or 'options' for menu):"
  read -e input
  
  # ##########################################
  # MENU HANDLING
  # ##########################################
  # Check for menu command
  if [[ "$input" == "options" ]]; then
    echo "OPTIONS:"
    echo "1. Close (exit)"
    echo "2. Minimize (return to main menu)"
    echo -n "Choose option: "
    read option
    
    case $option in
        1)
            echo "Closing task..."
            sleep 1
            exit 0
            ;;
        2)
            echo "Minimizing task..."
            sleep 1
            exit 10  # Special exit code for minimize
            ;;
        *)
            echo "Invalid option. Continuing..."
            sleep 1
            ;;
    esac
    continue
  fi
  
  # Check for exit condition
  if [[ "$input" == "q" || "$input" == "Q" ]]; then
    echo "Closing Word Counter..."
    sleep 1
    exit 0
  fi
  
  # ##########################################
  # WORD COUNTING LOGIC
  # ##########################################
  # Count words
  word_count=$(echo "$input" | wc -w)
  char_count=$(echo "$input" | wc -c)
  
  echo "Word count: $word_count"
  echo "Character count: $char_count"
  echo ""
done
