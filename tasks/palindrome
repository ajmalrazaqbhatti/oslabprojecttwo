#!/usr/bin/env bash

# NexOS Task: Palindrome Checker
# This task checks if a given word or phrase is a palindrome
# Implements standard close and minimize functionality:
# - When the task is closed, it exits with code 0
# - When the task is minimized, it exits with code 10

# Function to check if a string is a palindrome
is_palindrome() {
    local input="$1"
    # Remove spaces and convert to lowercase
    local cleaned=$(echo "$input" | tr -d ' ' | tr '[:upper:]' '[:lower:]')
    local reversed=$(echo "$cleaned" | rev)
    
    if [ "$cleaned" = "$reversed" ]; then
        return 0  # It's a palindrome
    else
        return 1  # Not a palindrome
    fi
}

# Display the task header
echo '=== NexOS Palindrome Checker ==='
echo 'Enter a word or phrase to check if it'\''s a palindrome'
echo '----------------------------------------'

# Main task loop
while true; do
    # Task-specific functionality
    echo -n "Type \"options\" to show menu > "
    read input
    
    if [ "$input" = "options" ]; then
        echo "OPTIONS:"
        echo "1. Close (exit)"
        echo "2. Minimize (return to main menu)"
        echo -n "Choose option: "
        read option
        
        case $option in
            1)
                echo "Closing task..."
                sleep 1
                exit 0
                ;;
            2)
                echo "Minimizing task..."
                sleep 1
                exit 10  # Special exit code for minimize
                ;;
            *)
                echo "Invalid option. Continuing..."
                sleep 1
                ;;
        esac
    else
        # Check if the input is a palindrome
        if [ -n "$input" ]; then
            if is_palindrome "$input"; then
                echo "\"$input\" is a palindrome!"
            else
                echo "\"$input\" is NOT a palindrome."
            fi
            echo
        fi
    fi
done